
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ğŸ”„ ë©”ëª¨ ë°±ì—…</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f9f9f9; }
    textarea {
      width: 100%;
      height: 300px;
      font-family: monospace;
      font-size: 14px;
      padding: 10px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }
    button {
      margin-top: 10px;
      padding: 10px 15px;
    }
    .tip {
      background: #fff3cd;
      border: 1px solid #ffeeba;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 16px;
      font-size: 0.95em;
    }
    #lastBackup {
      font-size: 0.9em;
      color: #666;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <h2>ğŸ”„ ë©”ëª¨ ë°±ì—…</h2>
  <div class="tip">
    ë³µì‚¬ëœ ë‚´ìš©ì„ <strong>iOSì—ì„œëŠ” í•˜ë‹¨ ê³µìœ  ë²„íŠ¼ â†’ 'íŒŒì¼ì— ì €ì¥'</strong>ì„ ì„ íƒí•´ ì €ì¥í•˜ì„¸ìš”.<br>
    <small>ğŸ“ íŒŒì¼ëª…ì—ëŠ” ë°±ì—… ë‚ ì§œê°€ ìë™ í¬í•¨ë©ë‹ˆë‹¤.</small>
  </div>

  <textarea id="backupArea" readonly></textarea>
  <button onclick="copyToClipboard()">ğŸ“‹ ë³µì‚¬í•˜ê¸°</button>
  <button onclick="downloadBackup()">ğŸ’¾ íŒŒì¼ë¡œ ì €ì¥</button>
  <p id="lastBackup"></p>

  <script>
    const data = localStorage.getItem("noteList") || "[]";
    const parsed = JSON.parse(data);
    const now = new Date();
    const json = JSON.stringify(parsed, null, 2);
    const filename = "backup_" + now.toISOString().slice(0,19).replace(/[:T]/g, "-") + ".json";

    document.getElementById("backupArea").value = json;
    localStorage.setItem("lastBackupDate", now.toLocaleString());
    document.getElementById("lastBackup").textContent = "ğŸ“… ë°±ì—… ì‹œê°: " + now.toLocaleString();

    function copyToClipboard() {
      const area = document.getElementById("backupArea");
      area.select();
      document.execCommand("copy");
      alert("ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. ê³µìœ  > íŒŒì¼ì— ì €ì¥ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.");
    }

    function downloadBackup() {
      const blob = new Blob([json], {{ type: "application/json" }});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      a.click();
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>
